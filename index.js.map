{"version":3,"sources":["traverse.js","node_modules/object-path/index.js","keepingLevelTool.js","extractTextForTranslate.js","validateEvents.js","index.js"],"names":["widthObjectPath","obj","callback","objectPath","key","nextLevelKey","join","exports","root","factory","module","define","amd","toStr","Object","prototype","toString","hasOwnProperty","prop","call","isEmpty","value","isArray","length","i","type","Array","getKey","intKey","parseInt","options","keys","reduce","proxy","bind","hasShallowProperty","includeInheritedProps","getShallowProperty","set","path","doNotReplace","split","map","currentPath","currentValue","slice","has","j","ensureExists","insert","at","arr","get","splice","empty","isBoolean","isObject","push","apply","arguments","coalesce","paths","defaultValue","len","nextObj","del","mod","create","withInheritedProps","traverse","require","makeSameBaseCollection","isEmptyCollection","targetProperties","extractText","newCurrent","child","Id","Description","Name","forEach","property","undefined","mergeText","original","toMerge","result","JSON","parse","stringify","events","address","Error","extractTextForTranslate","isValidEvents","extracted","beforeUrl","keepingLevelTool","validateEvents","startDownload","linkEl","filename","content","alert","blob","Blob","URL","revokeObjectURL","createObjectURL","href","download","click","initExtractor","sourceSelector","file","document","querySelector","onchange","fileList","files","console","log","reader","FileReader","readAsText","onload","sourceJSON","e","error","confirm","Date","now","initMerger","downloadSelector","sourceFileObj","translatedFileObj","sourceFile","translatedFile","mergeTwoFile","resultObj"],"mappings":"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","file":"index.js","sourceRoot":"..","sourcesContent":["const widthObjectPath = (obj, callback, objectPath) => {\n  if (objectPath && obj) {\n    callback(obj, objectPath);\n  }\n  \n  if (obj && typeof obj === 'object') {\n    for (let key in obj) {\n      let nextLevelKey = key;\n      if (objectPath) {\n        nextLevelKey = [objectPath, key].join('.');\n      }\n      widthObjectPath(obj[key], callback, nextLevelKey)\n    }\n  }\n}\n\nexports.widthObjectPath = widthObjectPath;","(function (root, factory){\n  'use strict';\n\n  /*istanbul ignore next:cant test*/\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else {\n    // Browser globals\n    root.objectPath = factory();\n  }\n})(this, function(){\n  'use strict';\n\n  var toStr = Object.prototype.toString;\n  function hasOwnProperty(obj, prop) {\n    if(obj == null) {\n      return false\n    }\n    //to handle objects with null prototypes (too edge case?)\n    return Object.prototype.hasOwnProperty.call(obj, prop)\n  }\n\n  function isEmpty(value){\n    if (!value) {\n      return true;\n    }\n    if (isArray(value) && value.length === 0) {\n        return true;\n    } else if (typeof value !== 'string') {\n        for (var i in value) {\n            if (hasOwnProperty(value, i)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n  }\n\n  function toString(type){\n    return toStr.call(type);\n  }\n\n  function isObject(obj){\n    return typeof obj === 'object' && toString(obj) === \"[object Object]\";\n  }\n\n  var isArray = Array.isArray || function(obj){\n    /*istanbul ignore next:cant test*/\n    return toStr.call(obj) === '[object Array]';\n  }\n\n  function isBoolean(obj){\n    return typeof obj === 'boolean' || toString(obj) === '[object Boolean]';\n  }\n\n  function getKey(key){\n    var intKey = parseInt(key);\n    if (intKey.toString() === key) {\n      return intKey;\n    }\n    return key;\n  }\n\n  function factory(options) {\n    options = options || {}\n\n    var objectPath = function(obj) {\n      return Object.keys(objectPath).reduce(function(proxy, prop) {\n        if(prop === 'create') {\n          return proxy;\n        }\n\n        /*istanbul ignore else*/\n        if (typeof objectPath[prop] === 'function') {\n          proxy[prop] = objectPath[prop].bind(objectPath, obj);\n        }\n\n        return proxy;\n      }, {});\n    };\n\n    function hasShallowProperty(obj, prop) {\n      return (options.includeInheritedProps || (typeof prop === 'number' && Array.isArray(obj)) || hasOwnProperty(obj, prop))\n    }\n\n    function getShallowProperty(obj, prop) {\n      if (hasShallowProperty(obj, prop)) {\n        return obj[prop];\n      }\n    }\n\n    function set(obj, path, value, doNotReplace){\n      if (typeof path === 'number') {\n        path = [path];\n      }\n      if (!path || path.length === 0) {\n        return obj;\n      }\n      if (typeof path === 'string') {\n        return set(obj, path.split('.').map(getKey), value, doNotReplace);\n      }\n      var currentPath = path[0];\n      var currentValue = getShallowProperty(obj, currentPath);\n      if (path.length === 1) {\n        if (currentValue === void 0 || !doNotReplace) {\n          obj[currentPath] = value;\n        }\n        return currentValue;\n      }\n\n      if (currentValue === void 0) {\n        //check if we assume an array\n        if(typeof path[1] === 'number') {\n          obj[currentPath] = [];\n        } else {\n          obj[currentPath] = {};\n        }\n      }\n\n      return set(obj[currentPath], path.slice(1), value, doNotReplace);\n    }\n\n    objectPath.has = function (obj, path) {\n      if (typeof path === 'number') {\n        path = [path];\n      } else if (typeof path === 'string') {\n        path = path.split('.');\n      }\n\n      if (!path || path.length === 0) {\n        return !!obj;\n      }\n\n      for (var i = 0; i < path.length; i++) {\n        var j = getKey(path[i]);\n\n        if((typeof j === 'number' && isArray(obj) && j < obj.length) ||\n          (options.includeInheritedProps ? (j in Object(obj)) : hasOwnProperty(obj, j))) {\n          obj = obj[j];\n        } else {\n          return false;\n        }\n      }\n\n      return true;\n    };\n\n    objectPath.ensureExists = function (obj, path, value){\n      return set(obj, path, value, true);\n    };\n\n    objectPath.set = function (obj, path, value, doNotReplace){\n      return set(obj, path, value, doNotReplace);\n    };\n\n    objectPath.insert = function (obj, path, value, at){\n      var arr = objectPath.get(obj, path);\n      at = ~~at;\n      if (!isArray(arr)) {\n        arr = [];\n        objectPath.set(obj, path, arr);\n      }\n      arr.splice(at, 0, value);\n    };\n\n    objectPath.empty = function(obj, path) {\n      if (isEmpty(path)) {\n        return void 0;\n      }\n      if (obj == null) {\n        return void 0;\n      }\n\n      var value, i;\n      if (!(value = objectPath.get(obj, path))) {\n        return void 0;\n      }\n\n      if (typeof value === 'string') {\n        return objectPath.set(obj, path, '');\n      } else if (isBoolean(value)) {\n        return objectPath.set(obj, path, false);\n      } else if (typeof value === 'number') {\n        return objectPath.set(obj, path, 0);\n      } else if (isArray(value)) {\n        value.length = 0;\n      } else if (isObject(value)) {\n        for (i in value) {\n          if (hasShallowProperty(value, i)) {\n            delete value[i];\n          }\n        }\n      } else {\n        return objectPath.set(obj, path, null);\n      }\n    };\n\n    objectPath.push = function (obj, path /*, values */){\n      var arr = objectPath.get(obj, path);\n      if (!isArray(arr)) {\n        arr = [];\n        objectPath.set(obj, path, arr);\n      }\n\n      arr.push.apply(arr, Array.prototype.slice.call(arguments, 2));\n    };\n\n    objectPath.coalesce = function (obj, paths, defaultValue) {\n      var value;\n\n      for (var i = 0, len = paths.length; i < len; i++) {\n        if ((value = objectPath.get(obj, paths[i])) !== void 0) {\n          return value;\n        }\n      }\n\n      return defaultValue;\n    };\n\n    objectPath.get = function (obj, path, defaultValue){\n      if (typeof path === 'number') {\n        path = [path];\n      }\n      if (!path || path.length === 0) {\n        return obj;\n      }\n      if (obj == null) {\n        return defaultValue;\n      }\n      if (typeof path === 'string') {\n        return objectPath.get(obj, path.split('.'), defaultValue);\n      }\n\n      var currentPath = getKey(path[0]);\n      var nextObj = getShallowProperty(obj, currentPath)\n      if (nextObj === void 0) {\n        return defaultValue;\n      }\n\n      if (path.length === 1) {\n        return nextObj;\n      }\n\n      return objectPath.get(obj[currentPath], path.slice(1), defaultValue);\n    };\n\n    objectPath.del = function del(obj, path) {\n      if (typeof path === 'number') {\n        path = [path];\n      }\n\n      if (obj == null) {\n        return obj;\n      }\n\n      if (isEmpty(path)) {\n        return obj;\n      }\n      if(typeof path === 'string') {\n        return objectPath.del(obj, path.split('.'));\n      }\n\n      var currentPath = getKey(path[0]);\n      if (!hasShallowProperty(obj, currentPath)) {\n        return obj;\n      }\n\n      if(path.length === 1) {\n        if (isArray(obj)) {\n          obj.splice(currentPath, 1);\n        } else {\n          delete obj[currentPath];\n        }\n      } else {\n        return objectPath.del(obj[currentPath], path.slice(1));\n      }\n\n      return obj;\n    }\n\n    return objectPath;\n  }\n\n  var mod = factory();\n  mod.create = factory;\n  mod.withInheritedProps = factory({includeInheritedProps: true})\n  return mod;\n});\n","const traverse = require('./traverse');\nconst objectPath = require('object-path');\n\nfunction makeSameBaseCollection(obj) {\n  if (obj && typeof obj === 'object') {\n    if (obj instanceof Array) {\n      return [];\n    } else {\n      return {};\n    }\n  }\n\n  return undefined;\n}\n\nfunction isEmptyCollection(obj) {\n  return !obj || obj.length === 0 || Object.keys(obj).length === 0;\n}\n\nconst targetProperties = ['Description', 'Teaser', 'Name', 'Id', 'ButtonText'];\n\nexports.extractText = function extractText(obj) {\n  if (obj && typeof obj === 'object') {\n    let newCurrent = makeSameBaseCollection(obj);\n    for (let key in obj) {\n      let child = extractText(obj[key]);\n      if (child) {\n        newCurrent[key] = child;\n      }\n    }\n\n    if (obj.Id && (obj.Description || obj.Name)) {\n      targetProperties.forEach((property) => {\n        newCurrent[property] = obj[property];\n      });\n    }\n\n    if (isEmptyCollection(newCurrent)) {\n      return undefined;\n    }\n\n    return newCurrent;\n  }\n}\n\nexports.mergeText = function(original, toMerge) {\n  let result = JSON.parse(JSON.stringify(original));\n\n  traverse.widthObjectPath(toMerge, (obj, path) => {\n    if (typeof obj != 'object') {\n      objectPath.set(result, path, obj);\n    }\n  })\n\n  return result;\n}","const traverse = require('./traverse');\n\nmodule.exports = function extractTextForTranslate(events) {\n  const targetProperties = ['Description', 'Teaser', 'Name'];\n  const result = {};\n\n  const callback = (obj, objectPath) => {\n    if (obj.Id) {\n      targetProperties.forEach(property => {\n        if (obj[property]) {\n          const address = [obj.Id, objectPath, property].join('-');\n          if (result[address]) {\n            throw new Error('Same Address, must be invalid events.json');\n          }\n          result[address] = obj[property];\n        }\n      });\n    }\n  };\n  traverse.widthObjectPath(events, callback);\n\n  return result;\n}\n","const extractTextForTranslate = require('./extractTextForTranslate');\n\nexports.isValidEvents = function(events) {\n  // 874 개의 array\n  if (!(events instanceof Array)) {\n    return 'not_array';\n  }\n\n  if (events.length != 874) {\n    return 'invalid_length';\n  }\n\n  let extracted = extractTextForTranslate(events);\n  if (Object.keys(extracted).length != 26723) {\n    return 'invalid_depth';\n  }\n}","var keepingLevelTool = require(\"./keepingLevelTool\");\nvar validateEvents = require(\"./validateEvents\");\nvar beforeUrl;\n\nfunction startDownload(linkEl, filename, content) {\n  alert('다운로드를 시작합니다.');\n  \n  var blob = new Blob([content], {type: 'application/json'});\n  if (beforeUrl) {\n    URL.revokeObjectURL(beforeUrl);\n    beforeUrl = undefined;\n  }\n  beforeUrl = URL.createObjectURL(blob);\n  linkEl.href = beforeUrl;\n  linkEl.download = filename;\n  linkEl.click();\n}\n\nfunction initExtractor() {\n  var sourceSelector = '#source';\n  var downloadSelector = '#download';\n\n  var file = document.querySelector(sourceSelector);\n\n  file.onchange = function () { \n      var fileList = file.files ;\n\n      if (fileList.length < 1) {\n        console.log('no file');\n        return;\n      }\n      \n      // 읽기\n      var reader = new FileReader();\n      reader.readAsText(fileList[0]);\n  \n      //로드 한 후\n      reader.onload = function () {\n        var linkEl = document.querySelector(downloadSelector);\n        try {\n          var sourceJSON = JSON.parse(reader.result);\n        } catch(e) {\n          console.error(e);\n          alert('비정상적인 파일입니다.');\n          file.value = '';\n          return;\n        }\n\n        if (validateEvents.isValidEvents(sourceJSON)) {\n          var ret = confirm('업로드한 파일이 원본 events.json 파일과 데이터 갯수가 다릅니다. 추출을 계속하시겠습니까?');\n          if (!ret) {\n            file.value = '';\n            return;\n          }\n        }\n\n        var extracted = keepingLevelTool.extractText(sourceJSON);\n        startDownload(linkEl, \"new_events_\" + Date.now() + \".json\", JSON.stringify(extracted, undefined, 4));\n        \n\n        file.value = '';\n      }; \n  }; \n\n}\n\ninitExtractor();\n\n\nfunction initMerger() {\n  var sourceSelector = '#merge_source';\n  var translatedSelector = '#merge_translated';\n  var downloadSelector = '#merge_download';\n\n  var sourceFileObj = undefined;\n  var translatedFileObj = undefined;\n\n  var sourceFile = document.querySelector(sourceSelector);\n  var translatedFile = document.querySelector(translatedSelector);\n\n  function mergeTwoFile() {\n    if (!sourceFileObj || !translatedFileObj) {\n      console.log('not yet', sourceFileObj, translatedFileObj);\n      return;\n    }\n    \n    var resultObj = keepingLevelTool.mergeText(sourceFileObj, translatedFileObj);\n\n\n    if (validateEvents.isValidEvents(resultObj)) {\n      var ret = confirm('병합 결과 파일이 원본 events.json 파일과 데이터 갯수가 다릅니다. 번역본 파일의 형식이 변경되었을 가능성이 있습니다. 병합한 파일을 다운로드하시겠습니까?');\n      if (!ret) {\n        sourceFileObj = undefined;\n        sourceFile.value = '';\n        translatedFileObj = undefined;\n        translatedFile.value = '';\n        return;\n      }\n    }\n\n\n    var linkEl = document.querySelector(downloadSelector);\n\n    startDownload(linkEl, \"merged_events_\" + Date.now() + \".json\", JSON.stringify(resultObj, undefined, 4));\n\n    sourceFileObj = undefined;\n    sourceFile.value = '';\n    translatedFileObj = undefined;\n    translatedFile.value = '';\n  }\n\n  sourceFile.onchange = function () { \n\n    var fileList = sourceFile.files ;\n\n    if (fileList.length < 1) {\n      console.log('no file');\n      return;\n    }\n    \n    // 읽기\n    var reader = new FileReader();\n    reader.readAsText(fileList[0]);\n\n    reader.onload = function() {\n      try {\n        sourceFileObj = JSON.parse(reader.result);\n      } catch(e) {\n        console.error(e);\n\n        alert('비정상적인 파일입니다.');\n        sourceFileObj = undefined;\n        sourceFile.value = '';\n        return;\n      }\n\n      if (validateEvents.isValidEvents(sourceFileObj)) {\n        var ret = confirm('업로드한 파일이 원본 events.json 파일과 데이터 갯수가 다릅니다. 병합을 계속하시겠습니까?');\n        if (!ret) {\n          sourceFileObj = undefined;\n          sourceFile.value = '';\n          return;\n        }\n      }\n\n      mergeTwoFile();\n    }\n  }\n\n  \n  translatedFile.onchange = function () { \n\n    var fileList = translatedFile.files ;\n\n    if (fileList.length < 1) {\n      console.log('no file');\n      return;\n    }\n    \n    // 읽기\n    var reader = new FileReader();\n    reader.readAsText(fileList[0]);\n\n    reader.onload = function() {\n      try {\n        translatedFileObj = JSON.parse(reader.result);\n      } catch(e) {\n        console.error(e);\n        alert('비정상적인 파일입니다.');\n        translatedFileObj = undefined;\n        translatedFile.value = '';\n        return;\n      }\n      \n      mergeTwoFile();\n    }\n  }\n}\ninitMerger();"]}